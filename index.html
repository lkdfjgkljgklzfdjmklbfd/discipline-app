<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DISCIPLINE</title>

<style>
body{
margin:0;
font-family:Arial;
background:black;
color:white;
overflow:hidden;
}
canvas{
position:fixed;
top:0;left:0;
z-index:-1;
}
#container{
height:100vh;
display:flex;
justify-content:center;
align-items:center;
padding:12px;
}
.card{
background:rgba(12,12,12,0.95);
padding:24px;
border-radius:20px;
width:min(800px,100%);
box-shadow:0 0 40px rgba(255,0,0,0.2);
text-align:center;
}
h1{
font-size:56px;
letter-spacing:8px;
color:#ff1a1a;
margin:0;
}
h2{color:#aaa;}

button{
background:#b30000;
border:none;
color:white;
padding:14px 20px;
border-radius:12px;
margin-top:14px;
font-weight:bold;
cursor:pointer;
}
button:hover{background:#ff1a1a;}

.choice{
background:#1a1a1a;
padding:14px;
margin:10px 0;
border-radius:12px;
cursor:pointer;
border:2px solid transparent;
}
.choice.selected{
border:2px solid #ff1a1a;
}

.word-container{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:8px;
margin:12px 0;
}
.word{
background:#990000;
padding:8px 12px;
border-radius:10px;
cursor:pointer;
}

#hud{
display:flex;
justify-content:space-between;
font-size:14px;
margin-bottom:12px;
color:#aaa;
}

#rankPopup{
position:fixed;
inset:0;
background:rgba(0,0,0,0.8);
display:none;
align-items:center;
justify-content:center;
z-index:9999;
}
.popupCard{
background:#111;
padding:30px;
border-radius:20px;
text-align:center;
}
.rankName{
font-size:28px;
color:#ff1a1a;
font-weight:bold;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<div id="rankPopup">
<div class="popupCard">
<div style="font-size:40px">ðŸª™</div>
<h2>RANK UP</h2>
<div class="rankName" id="popupRank"></div>
<button onclick="closePopup()">CONTINUE â†’</button>
</div>
</div>

<div id="container">
<div class="card" id="intro">
<h1>DISCIPLINE</h1>
<h2>YOU VS YOU</h2>
<button onclick="showRankScreen()">START SESSION â†’</button>
<p style="font-size:12px;color:#777">made by Frihet</p>
</div>
</div>

<script>

/* ===== BACKGROUND ===== */
const canvas=document.getElementById("bg");
const ctx=canvas.getContext("2d");
function resize(){
canvas.width=innerWidth;
canvas.height=innerHeight;
}
resize();
addEventListener("resize",resize);

let candles=[];
for(let i=0;i<40;i++){
candles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
h:Math.random()*60+20,
s:Math.random()*1+0.5
});
}
function anim(){
ctx.clearRect(0,0,canvas.width,canvas.height);
candles.forEach(c=>{
ctx.fillStyle="rgba(255,0,0,0.35)";
ctx.fillRect(c.x,c.y,6,c.h);
c.y+=c.s;
if(c.y>canvas.height)c.y=-c.h;
});
requestAnimationFrame(anim);
}
anim();

/* ===== DATA ===== */
const items=[
"I feel you, bro. Iâ€™ve also been through a lot.",
"You donâ€™t need motivation. you just need discipline, bro.",
"You just need to control yourself. itâ€™s you vs you, bro.",
"I want you to succeed, bro. I believe in you.",
"But you know, someone has to do 9 to 5 stuff. Not everyone can be a millionaire.",
"I know itâ€™s hard but dude nothing is easy in this world. You gotta work hard.",
"Go ghost, bro. You canâ€™t grow when people are around you.",
"Lock in. You wanna be rich or not?",
"I donâ€™t wanna be an NPC, bro. Thatâ€™s why Iâ€™m working this hard.",
"You think I enjoy going to the gym every day? Hell nah, bro. I genuinely donâ€™t.",
"You live only one life, bro. Nothing can stop you. do what you want.",
"If you want big money, make a big move. You canâ€™t get rich with a 9 to 5 job, you know that.",
"If you wanna be different, you gotta be emotionless, bro. Learn to control your emotions",
"Bro, everyoneâ€™s lost. Itâ€™s not just you. Weâ€™re all lost. Thatâ€™s the beauty of life"
];

/* ===== FHT SYSTEM ===== */
const KEY="FHT";
function getFHT(){return parseInt(localStorage.getItem(KEY)||"0")}
function setFHT(v){if(v<0)v=0;localStorage.setItem(KEY,v)}

const RANKS=[
{n:"LOSER",min:0},
{n:"NPC",min:50},
{n:"HUMAN",min:150},
{n:"RICH",min:300},
{n:"MILLIONAIRE",min:600},
{n:"BILLIONAIRE",min:1000}
];

function rankOf(v){
let r=RANKS[0];
RANKS.forEach(x=>{if(v>=x.min)r=x});
return r;
}
function nextRank(v){
for(let r of RANKS){
if(v<r.min)return r;
}
return null;
}

/* ===== START FLOW ===== */
function showRankScreen(){
let f=getFHT();
let r=rankOf(f);
let n=nextRank(f);

document.getElementById("container").innerHTML=
`<div class="card">
<h2>YOUR RANK</h2>
<p style="font-size:22px">ðŸª™ FHT: <b>${f}</b></p>
<p>RANK: <b>${r.n}</b></p>
<p>NEXT: <b>${n?n.n:"MAX"}</b></p>
<button onclick="startGame()">NEXT â†’</button>
</div>`;
}

/* ===== GAME ===== */
let used=[],score=0,round=0,current=0,selected=null,audio=null;

function startGame(){
document.getElementById("container").innerHTML=
`<div class="card">
<div id="hud">
<div>Round: <span id="roundTxt">0/${items.length}</span></div>
<div>ðŸª™ FHT: <span id="fhtTxt">${getFHT()}</span></div>
</div>
<h2 id="mode"></h2>
<button onclick="playAudio()">PLAY</button>
<div id="content"></div>
<div id="result"></div>
</div>`;
nextRound();
}

function normalize(t){
return t.toLowerCase().replace(/[.,!?]/g,"").replace(/\s+/g,"");
}

function nextRound(){
if(round>=items.length){
document.getElementById("content").innerHTML=
`<h2>Session Complete</h2>
<p>Score: ${score}/${items.length}</p>
<button onclick="location.reload()">Restart</button>`;
return;
}

round++;
document.getElementById("roundTxt").innerText=`${round}/${items.length}`;
selected=null;
document.getElementById("result").innerText="";
document.getElementById("content").innerHTML="";

do{
current=Math.floor(Math.random()*items.length);
}while(used.includes(current));
used.push(current);

if(Math.random()>0.5) buildListen();
else buildDrag();
}

/* ===== LISTEN ===== */
function buildListen(){
document.getElementById("mode").innerText="Listen & Decide";

let correct=items[current];
let options=[correct];
while(options.length<4){
let r=items[Math.floor(Math.random()*items.length)];
if(!options.includes(r))options.push(r);
}
options.sort(()=>0.5-Math.random());

options.forEach(o=>{
let d=document.createElement("div");
d.className="choice";
d.innerText=o;
d.onclick=()=>{
document.querySelectorAll(".choice").forEach(c=>c.classList.remove("selected"));
d.classList.add("selected");
selected=o;
};
document.getElementById("content").appendChild(d);
});

let btn=document.createElement("button");
btn.innerText="CHECK";
btn.onclick=()=>{
if(!selected)return;
if(normalize(selected)==normalize(items[current])) success();
else fail();
};
document.getElementById("content").appendChild(btn);
}

/* ===== DRAG ===== */
function buildDrag(){
document.getElementById("mode").innerText="Build With Focus";

let words=items[current].split(" ");
let shuffled=[...words].sort(()=>0.5-Math.random());

let top=document.createElement("div");
top.className="word-container";
top.id="top";

let bottom=document.createElement("div");
bottom.className="word-container";
bottom.id="bottom";

shuffled.forEach(w=>{
let s=document.createElement("div");
s.className="word";
s.innerText=w;
s.onclick=()=>{
if(s.parentElement.id==="bottom")top.appendChild(s);
else bottom.appendChild(s);
};
bottom.appendChild(s);
});

let btn=document.createElement("button");
btn.innerText="CHECK";
btn.onclick=()=>{
let built="";
document.querySelectorAll("#top .word").forEach(w=>built+=w.innerText+" ");
if(normalize(built)==normalize(items[current])) success();
else fail();
};

document.getElementById("content").append(top,bottom,btn);
}

/* ===== FHT ANIMATION ===== */
function animateFHT(target){
let el=document.getElementById("fhtTxt");
let cur=parseInt(el.innerText);
let step=target>cur?1:-1;
let i=setInterval(()=>{
cur+=step;
el.innerText=cur;
if(cur==target)clearInterval(i);
},20);
}

/* ===== RESULT ===== */
function success(){
score++;
let before=rankOf(getFHT()).n;
let val=getFHT()+2;
setFHT(val);
animateFHT(val);

let after=rankOf(val).n;
document.getElementById("result").innerText="LOCKED.";

if(before!=after){
document.getElementById("popupRank").innerText=after;
document.getElementById("rankPopup").style.display="flex";
}else{
setTimeout(nextRound,1200);
}
}

function fail(){
let val=getFHT()-1;
setFHT(val);
animateFHT(getFHT());
document.getElementById("result").innerText="-1. Refocus.";
setTimeout(nextRound,1400);
}

function closePopup(){
document.getElementById("rankPopup").style.display="none";
nextRound();
}

function playAudio(){
if(audio){audio.pause();audio.currentTime=0;}
audio=new Audio("audio"+(current+1)+".mp3");
audio.play();
}
</script>

</body>
</html>
