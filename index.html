<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#000000">
<title>DISCIPLINE</title>

<style>
:root{
  --red:#ff1a1a;
  --red2:#b30000;
  --panel: rgba(10,10,10,0.92);
  --panel2: rgba(18,18,18,0.92);
  --text: rgba(255,255,255,0.92);
  --muted: rgba(255,255,255,0.65);
}

*{ box-sizing:border-box; }

html, body{ height:100%; }

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:#000;
  color:var(--text);
  overflow:hidden;
}

canvas{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  z-index:-2;
}

/* overlay so UI pops */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.25), rgba(0,0,0,0.82));
  z-index:-1;
}

#container{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}

/* card */
.card{
  width:min(820px, 100%);
  background: linear-gradient(180deg, var(--panel), var(--panel2));
  border:1px solid rgba(255,26,26,0.14);
  border-radius:24px;
  box-shadow: 0 18px 70px rgba(255,0,0,0.18);
  padding:28px;
}

/* intro */
/* Premium brand title */
#intro h1{
  font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "Segoe UI", Roboto, Arial, sans-serif;
  font-size: clamp(44px, 7vw, 64px);
  letter-spacing: 0.18em;
  text-transform: uppercase;
  margin: 0;
  line-height: 1;

  /* premium red gradient */
  background: linear-gradient(180deg, #ff3b3b 0%, #b30000 55%, #6a0000 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;

  /* subtle glow (not cringe) */
  text-shadow:
    0 8px 30px rgba(255, 0, 0, 0.18),
    0 2px 10px rgba(255, 0, 0, 0.12);
}

/* Premium subtitle */
#intro h2{
  margin-top: 14px;
  font-size: 13px;
  letter-spacing: 0.28em;
  text-transform: uppercase;
  color: rgba(255,255,255,0.72);
}

/* mode title */
#mode{
  font-size:22px;
  margin:6px 0 12px;
  letter-spacing:0.5px;
}

/* buttons */
button{
  appearance:none;
  border:none;
  cursor:pointer;
  background: linear-gradient(180deg, var(--red2), #7a0000);
  color:white;
  font-weight:800;
  letter-spacing:1px;
  border-radius:16px;
  height:54px;
  padding:0 18px;
  min-width: 220px;
  box-shadow: 0 10px 26px rgba(255,0,0,0.18);
  transition: transform .08s ease, filter .15s ease;
}
button:hover{ filter:brightness(1.08); }
button:active{ transform: scale(0.98); }

.card button{ margin:10px 8px 0; }

/* âœ… FIX: darker solid choice cards (consistent across Samsung/Chrome/Safari) */
.choice{
  background: rgba(28,28,28,0.92);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 20px;
  padding: 18px 16px;
  margin: 12px 0;
  cursor: pointer;
  font-size: 19px;
  line-height: 1.35;
  text-align: left;
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
}
.choice.selected{
  border-color: rgba(255,26,26,0.90);
  box-shadow: 0 0 0 2px rgba(255,26,26,0.28), 0 12px 34px rgba(0,0,0,0.5);
}

/* drag words */
.word-container{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
  margin:16px 0;
  min-height:64px;
  padding:10px;
  border-radius:16px;
  background: rgba(28,28,28,0.75);
  border:1px solid rgba(255,255,255,0.10);
}
.word{
  background: rgba(255,26,26,0.18);
  border:1px solid rgba(255,26,26,0.28);
  padding:10px 14px;
  border-radius:16px;
  font-size:17px;
  font-weight:700;
  user-select:none;
}

/* HUD */
#hud{
  margin-bottom:14px;
  padding-right: 120px; /* âœ… FIX: reserve space so streak never overlaps XP */
}
#hud *{ font-size:14px !important; }

#result{
  margin-top:14px;
  font-size:18px;
  font-weight:900;
  letter-spacing:0.5px;
}

.hint{
  margin-top:12px;
  color:var(--muted);
  font-size:13px;
}

/* âœ… FIX: Streak position safe across Samsung/Chrome/Safari */
#streakBox{
  position:fixed;
  top: calc(env(safe-area-inset-top) + 12px);
  right: 12px;
  font-size:13px;
  color:rgba(255,255,255,0.85);
  z-index:99999;
  pointer-events:none;
}

#credit{
  position:fixed;
  bottom: calc(env(safe-area-inset-bottom) + 12px);
  right:12px;
  font-size:12px;
  color:rgba(255,255,255,0.55);
  letter-spacing:1px;
  z-index:9999;
  pointer-events:none;
}

/* ===== TRUE FULLSCREEN MOBILE ===== */
@media (max-width: 520px){
  #container{
    padding: 0 !important;
    height: 100dvh;
    align-items: stretch;
  }

  .card{
    width: 100%;
    min-height: 100dvh;
    border-radius: 0 !important;
    padding:
      calc(env(safe-area-inset-top) + 16px)
      16px
      calc(env(safe-area-inset-bottom) + 18px)
      16px !important;

    display:flex;
    flex-direction:column;
    justify-content:flex-start;
  }

  /* scroll like an app */
  #content{
    flex:1;
    overflow:auto;
    padding-bottom: 86px;
    -webkit-overflow-scrolling: touch;
  }

  #intro h1{ font-size:48px; letter-spacing:5px; }
  #intro h2{ font-size:15px; letter-spacing:3px; }
  #mode{ font-size:22px; margin: 10px 0 14px; }

  /* play smaller centered */
  .btn.play{
    width: 64%;
    max-width: 320px;
    min-width: unset;
    height: 52px;
    font-size: 15px;
    border-radius: 18px;
    align-self:center;
    margin-left:auto;
    margin-right:auto;
  }

  /* check sticky bottom */
  .btn.check{
    position: sticky;
    bottom: calc(env(safe-area-inset-bottom) + 10px);
    width: 100%;
    min-width: unset;
    height: 58px;
    font-size: 16px;
    border-radius: 18px;
    margin: 14px 0 0;
  }

  /* hud slightly bigger */
  #hud *{ font-size:14px !important; }
  #result{ font-size:18px; }
}
</style>
</head>

<body>
<canvas id="bg"></canvas>
<div id="streakBox"></div>
<div id="credit">made by Frihet</div>

<div id="container">
  <div class="card" id="intro">
    <h1>DISCIPLINE</h1>
    <h2>YOU VS YOU</h2>
    <div class="brand-line"></div>
    <button onclick="startGame()">START SESSION â†’</button>
    <p style="color: rgba(255,255,255,0.65); font-size: 12px; margin-top: 20px; letter-spacing: 1px;">
      made by Frihet
    </p>
  </div>
</div>

  .brand-line{
  width: min(340px, 80%);
  height: 2px;
  margin: 18px auto 6px;
  border-radius: 999px;
  background: linear-gradient(90deg, transparent, rgba(255,26,26,0.95), transparent);
  box-shadow: 0 10px 24px rgba(255,0,0,0.14);
}

<script>
/* ===== Background (candles) ===== */
const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let candles = [];
function initCandles(){
  candles = [];
  for (let i = 0; i < 40; i++) {
    candles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      height: Math.random() * 60 + 20,
      speed: Math.random() * 1 + 0.5
    });
  }
}
initCandles();

function animate() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  candles.forEach(c => {
    ctx.fillStyle = "rgba(255,0,0,0.35)";
    ctx.fillRect(c.x, c.y, 6, c.height);
    c.y += c.speed;
    if (c.y > canvas.height) c.y = -c.height;
  });
  requestAnimationFrame(animate);
}
animate();

/* ===== Content ===== */
const items = [
  { en:"I feel you, bro. Iâ€™ve also been through a lot.", de:"Ich fÃ¼hl dich, Bro. Ich hab auch schon viel durchgemacht.", es:"Te entiendo, bro. Yo tambiÃ©n he pasado por mucho." },
  { en:"You donâ€™t need motivation. you just need discipline, bro.", de:"Du brauchst keine Motivation. Du brauchst Disziplin, Bro.", es:"No necesitas motivaciÃ³n. Necesitas disciplina, bro." },
  { en:"You just need to control yourself. itâ€™s you vs you, bro.", de:"Du musst dich einfach kontrollieren. Es geht nur um dich gegen dich, Bro.", es:"Solo tienes que controlarte. Es tÃº contra tÃº, bro." },
  { en:"I want you to succeed, bro. I believe in you.", de:"Ich will, dass du Erfolg hast, Bro. Ich glaub an dich.", es:"Quiero que tengas Ã©xito, bro. Creo en ti." },
  { en:"But you know, someone has to do 9 to 5 stuff. Not everyone can be a millionaire.", de:"Aber weiÃŸt du, irgendwer muss halt den 9-to-5-Job machen. Nicht jeder wird MillionÃ¤r.", es:"Pero ya sabes, alguien tiene que trabajar de 9 a 5. No todos van a ser millonarios." },
  { en:"I know itâ€™s hard but dude nothing is easy in this world. You gotta work hard.", de:"Ich weiÃŸ, es ist hart, aber nichts auf dieser Welt ist leicht. Du musst hart arbeiten.", es:"SÃ© que es difÃ­cil, pero nada en este mundo es fÃ¡cil. Tienes que trabajar duro." },
  { en:"Go ghost, bro. You canâ€™t grow when people are around you.", de:"Zieh dich zurÃ¼ck, Bro. Du kannst nicht wachsen, wenn stÃ¤ndig Leute um dich herum sind.", es:"Desaparece un rato, bro. No puedes crecer si la gente siempre estÃ¡ alrededor." },
  { en:"Lock in. You wanna be rich or not?", de:"Fokussier dich. Willst du reich werden oder nicht?", es:"ConcÃ©ntrate. Â¿Quieres ser rico o no?" },
  { en:"I donâ€™t wanna be an NPC, bro. Thatâ€™s why Iâ€™m working this hard.", de:"Ich will kein NPC sein, Bro. Deshalb arbeite ich so hart.", es:"No quiero ser un NPC, bro. Por eso estoy trabajando asÃ­ de duro." },
  { en:"You think I enjoy going to the gym every day? Hell nah, bro. I genuinely donâ€™t.", de:"Denkst du, ich geh gern jeden Tag ins Gym? Hell nah, Bro. Ehrlich nicht.", es:"Â¿Crees que disfruto ir al gym todos los dÃ­as? Hell nah, bro. De verdad que no." },
  { en:"You live only one life, bro. Nothing can stop you. do what you want.", de:"Du hast nur ein Leben, Bro. Nichts kann dich aufhalten. Mach, was du willst.", es:"Solo tienes una vida, bro. Nada puede detenerte. Haz lo que quieras." },
  { en:"If you want big money, make a big move. You canâ€™t get rich with a 9 to 5 job, you know that.", de:"Wenn du groÃŸes Geld willst, musst du groÃŸe Moves machen. Mit einem 9-to-5-Job wirst du nicht reich, das weiÃŸt du.", es:"Si quieres mucho dinero, haz un gran movimiento. No te vas a hacer rico con un trabajo de 9 a 5, tÃº lo sabes." },
  { en:"If you wanna be different, you gotta be emotionless, bro. Learn to control your emotions", de:"Wenn du anders sein willst, musst du emotionslos sein, Bro. Lern, deine Emotionen zu kontrollieren.", es:"Si quieres ser diferente, tienes que ser frÃ­o, bro. Aprende a controlar tus emociones." },
  { en:"Bro, everyoneâ€™s lost. Itâ€™s not just you. Weâ€™re all lost. Thatâ€™s the beauty of life", de:"Bro, jeder ist verloren. Nicht nur du. Wir sind alle verloren. Das ist das SchÃ¶ne am Leben.", es:"Bro, todos estamos perdidos. No eres solo tÃº. Todos estamos perdidos. Esa es la belleza de la vida." }
];

/* ===== State ===== */
let used = [];
let currentIndex = 0;
let score = 0;
let round = 0;
let selectedChoice = null;
let audio = null;

let xp = 0;
const XP_PER_WIN = 10;
const DAILY_GOAL = 50;

let nativeLang = localStorage.getItem("nativeLang") || "en";
let selectedMode = localStorage.getItem("mode") || "mix";

const LANGS = [
  { code: "en", label: "ðŸ‡¬ðŸ‡§ English" },
  { code: "de", label: "ðŸ‡©ðŸ‡ª Deutsch" },
  { code: "es", label: "ðŸ‡ªðŸ‡¸ EspaÃ±ol" }
];

/* ===== UI ===== */
const UI = {
  en: {
    chooseNative: "Choose your native language",
    chooseMode: "Choose a mode",
    mix: "MIX",
    listenOnly: "Listen",
    buildOnly: "Build",
    play: "PLAY",
    check: "CHECK",
    listenDecide: "Listen & Decide",
    buildFocus: "Build With Focus",
    sessionComplete: "Session Complete",
    score: "Score",
    restart: "Restart",
    strong: "LOCKED.",
    reset: "Reset. Focus.",
    xp: "XP",
    progress: "Progress",
    dailyGoal: "Daily Goal",
    goalComplete: "Daily Goal Complete âœ…"
  },
  de: {
    chooseNative: "WÃ¤hle deine Muttersprache",
    chooseMode: "WÃ¤hle den Modus",
    mix: "MIX",
    listenOnly: "HÃ¶ren",
    buildOnly: "Bauen",
    play: "PLAY",
    check: "PRÃœFEN",
    listenDecide: "HÃ¶ren & Entscheiden",
    buildFocus: "Satz bauen",
    sessionComplete: "Session beendet",
    score: "Punktzahl",
    restart: "Neustart",
    strong: "LOCKED.",
    reset: "Reset. Fokus.",
    xp: "XP",
    progress: "Fortschritt",
    dailyGoal: "Tagesziel",
    goalComplete: "Tagesziel geschafft âœ…"
  },
  es: {
    chooseNative: "Elige tu idioma nativo",
    chooseMode: "Elige el modo",
    mix: "MIX",
    listenOnly: "Escuchar",
    buildOnly: "Construir",
    play: "PLAY",
    check: "COMPROBAR",
    listenDecide: "Escucha y decide",
    buildFocus: "Construye la frase",
    sessionComplete: "SesiÃ³n terminada",
    score: "PuntuaciÃ³n",
    restart: "Reiniciar",
    strong: "LOCKED.",
    reset: "Reset. EnfÃ³cate.",
    xp: "XP",
    progress: "Progreso",
    dailyGoal: "Meta diaria",
    goalComplete: "Meta diaria completada âœ…"
  }
};

function t(key){
  return (UI[nativeLang] && UI[nativeLang][key]) || UI.en[key] || key;
}

function displayText(i){
  const obj = items[i];
  return obj[nativeLang] || obj.en;
}

/* ===== Daily XP storage ===== */
function todayKey(){ return new Date().toDateString(); }

function getDailyXP(){
  const savedDay = localStorage.getItem("dailyXP_day");
  const today = todayKey();
  if(savedDay !== today){
    localStorage.setItem("dailyXP_day", today);
    localStorage.setItem("dailyXP_value", "0");
    return 0;
  }
  return parseInt(localStorage.getItem("dailyXP_value") || "0");
}

function addDailyXP(amount){
  const savedDay = localStorage.getItem("dailyXP_day");
  const today = todayKey();
  if(savedDay !== today){
    localStorage.setItem("dailyXP_day", today);
    localStorage.setItem("dailyXP_value", "0");
  }
  let v = parseInt(localStorage.getItem("dailyXP_value") || "0");
  v += amount;
  localStorage.setItem("dailyXP_value", String(v));
  return v;
}

/* ===== Streak ===== */
function updateStreak() {
  let today = new Date().toDateString();
  let last = localStorage.getItem("lastDate");
  let streak = parseInt(localStorage.getItem("streak") || "0");

  if (last !== today) {
    let yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    if (last === yesterday.toDateString()) streak++;
    else streak = 1;
    localStorage.setItem("streak", streak);
    localStorage.setItem("lastDate", today);
  }

  document.getElementById("streakBox").innerText =
    "ðŸ”¥ Streak: " + (localStorage.getItem("streak") || 1);
}
updateStreak();

/* ===== Screens ===== */
function startGame(){
  const buttons = LANGS.map(l =>
    `<button class="btn" onclick="chooseLang('${l.code}')" style="margin:8px;">${l.label}</button>`
  ).join("");

  document.getElementById("container").innerHTML =
    `<div class="card">
      <h2 style="margin-top:0;">${t("chooseNative")}</h2>
      <div style="margin-top:18px;">${buttons}</div>
      <p style="color: rgba(255,255,255,0.65); font-size: 12px; margin-top: 20px;">made by Frihet</p>
    </div>`;
}

function chooseLang(lang){
  nativeLang = lang;
  localStorage.setItem("nativeLang", lang);

  used = [];
  score = 0;
  round = 0;
  xp = 0;
  selectedChoice = null;

  showModeSelect();
}

function showModeSelect(){
  document.getElementById("container").innerHTML =
    `<div class="card">
      <h2 style="margin-top:0;">${t("chooseMode")}</h2>

      <button class="btn" onclick="setMode('mix')" style="margin:8px;">${t("mix")}</button>
      <button class="btn" onclick="setMode('listen')" style="margin:8px;">${t("listenOnly")}</button>
      <button class="btn" onclick="setMode('drag')" style="margin:8px;">${t("buildOnly")}</button>

      <p style="color: rgba(255,255,255,0.65); font-size: 12px; margin-top: 20px;">made by Frihet</p>
    </div>`;
}

function setMode(m){
  selectedMode = m;
  localStorage.setItem("mode", m);
  startSession();
}

function startSession(){
  document.getElementById("container").innerHTML =
    `<div class="card">
      <div id="hud" style="text-align:left; margin-bottom:14px;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div style="font-size:13px; color:#aaa;">${t("progress")}: <span id="progressText">0/${items.length}</span></div>
          <div style="font-size:13px; color:#aaa;">${t("xp")}: <span id="xpText">0</span></div>
        </div>

        <div style="margin-top:10px; background:#1a1a1a; border-radius:999px; height:10px; overflow:hidden;">
          <div id="progressBar" style="height:10px; width:0%; background:#ff1a1a;"></div>
        </div>

        <div style="margin-top:12px; display:flex; justify-content:space-between; align-items:center;">
          <div style="font-size:13px; color:#aaa;">
            <span id="goalLabel">${t("dailyGoal")}: </span>
            <span id="goalText">0/${DAILY_GOAL} XP</span>
          </div>
        </div>

        <div style="margin-top:8px; background:#1a1a1a; border-radius:999px; height:10px; overflow:hidden;">
          <div id="goalBar" style="height:10px; width:0%; background:#ff1a1a;"></div>
        </div>
      </div>

      <h2 id="mode"></h2>
      <button class="btn play" onclick="playAudio()">${t("play")}</button>

      <div id="content"></div>
      <div id="result"></div>
    </div>`;

  nextRound();
  updateHUD();
}

/* ===== HUD ===== */
function updateHUD(){
  const done = used.length;

  const progressText = document.getElementById("progressText");
  const xpText = document.getElementById("xpText");
  const progressBar = document.getElementById("progressBar");

  if(progressText) progressText.innerText = done + "/" + items.length;
  if(xpText) xpText.innerText = xp;
  if(progressBar){
    const pct = Math.round((done / items.length) * 100);
    progressBar.style.width = pct + "%";
  }

  const dailyXP = getDailyXP();
  const goalPct = Math.min(100, Math.round((dailyXP / DAILY_GOAL) * 100));

  const goalTextEl = document.getElementById("goalText");
  const goalBarEl = document.getElementById("goalBar");
  const goalLabelEl = document.getElementById("goalLabel");

  if(goalTextEl && goalBarEl){
    goalBarEl.style.width = goalPct + "%";

    if(dailyXP >= DAILY_GOAL){
      if(goalLabelEl) goalLabelEl.innerText = "";
      goalTextEl.innerText = t("goalComplete");
    } else {
      if(goalLabelEl) goalLabelEl.innerText = t("dailyGoal") + ": ";
      goalTextEl.innerText = dailyXP + "/" + DAILY_GOAL + " XP";
    }
  }
}

/* ===== Game ===== */
function normalize(s){
  return s.toLowerCase().replace(/[.,!?]/g,"").replace(/\s+/g,"").trim();
}

function nextRound(){
  if(round >= items.length){
    document.getElementById("content").innerHTML =
      `<h2>${t("sessionComplete")}</h2>
       <p>${t("score")}: ${score} / ${items.length}</p>
       <p>${t("xp")}: ${xp}</p>
       <button class="btn" onclick="location.reload()">${t("restart")}</button>`;
    return;
  }

  round++;
  selectedChoice = null;
  document.getElementById("result").innerText="";
  document.getElementById("content").innerHTML="";

  do {
    currentIndex = Math.floor(Math.random()*items.length);
  } while(used.includes(currentIndex));
  used.push(currentIndex);

  updateHUD();

  if(selectedMode === "listen") buildListen();
  else if(selectedMode === "drag") buildDrag();
  else {
    if(Math.random()>0.5) buildListen();
    else buildDrag();
  }
}

function buildListen(){
  document.getElementById("mode").innerText = t("listenDecide");

  const correctText = displayText(currentIndex);

  let optionIndexes = [currentIndex];
  while(optionIndexes.length < 4){
    const r = Math.floor(Math.random() * items.length);
    if(!optionIndexes.includes(r)) optionIndexes.push(r);
  }
  optionIndexes.sort(()=>0.5 - Math.random());

  optionIndexes.forEach(idx=>{
    let div = document.createElement("div");
    div.className="choice";
    div.innerText = displayText(idx);
    div.onclick=()=>{
      document.querySelectorAll(".choice").forEach(c=>c.classList.remove("selected"));
      div.classList.add("selected");
      selectedChoice = displayText(idx);
    };
    document.getElementById("content").appendChild(div);
  });

  let btn = document.createElement("button");
  btn.className = "btn check";
  btn.innerText = t("check");
  btn.onclick=()=>{
    if(!selectedChoice) return;
    if(normalize(selectedChoice)===normalize(correctText)) success();
    else fail();
  };
  document.getElementById("content").appendChild(btn);

  if(nativeLang !== "en"){
    const hint = document.createElement("div");
    hint.className = "hint";
    hint.innerText = "English: " + items[currentIndex].en;
    document.getElementById("content").appendChild(hint);
  }
}

function buildDrag(){
  document.getElementById("mode").innerText = t("buildFocus");

  const targetSentence = displayText(currentIndex);
  let words = targetSentence.split(" ");
  let shuffled = [...words].sort(()=>0.5-Math.random());

  let top=document.createElement("div");
  top.className="word-container";
  top.id="top";

  let bottom=document.createElement("div");
  bottom.className="word-container";
  bottom.id="bottom";

  shuffled.forEach(w=>{
    let span=document.createElement("div");
    span.className="word";
    span.innerText=w;
    span.onclick=()=>{
      if(span.parentElement.id==="bottom") top.appendChild(span);
      else bottom.appendChild(span);
    };
    bottom.appendChild(span);
  });

  let btn=document.createElement("button");
  btn.className = "btn check";
  btn.innerText = t("check");
  btn.onclick=()=>{
    let built="";
    document.querySelectorAll("#top .word").forEach(w=>built+=w.innerText+" ");
    if(normalize(built)===normalize(targetSentence)) success();
    else fail();
  };

  document.getElementById("content").appendChild(top);
  document.getElementById("content").appendChild(bottom);
  document.getElementById("content").appendChild(btn);

  if(nativeLang !== "en"){
    const hint = document.createElement("div");
    hint.className = "hint";
    hint.innerText = "English: " + items[currentIndex].en;
    document.getElementById("content").appendChild(hint);
  }
}

function success(){
  playSound(true);
  score++;
  xp += XP_PER_WIN;
  addDailyXP(XP_PER_WIN);
  updateHUD();
  document.getElementById("result").innerText = t("strong");
  stopAudio();
  setTimeout(nextRound,1200);
}

function fail(){
  playSound(false);
  document.getElementById("result").innerText = t("reset");
  stopAudio();
  setTimeout(nextRound,1500);
}

function playAudio(){
  stopAudio();
  audio = new Audio("audio"+(currentIndex+1)+".mp3");
  audio.play();
}

function stopAudio(){
  if(audio){ audio.pause(); audio.currentTime = 0; }
}

function playSound(success){
  const aCtx=new (window.AudioContext||window.webkitAudioContext)();
  const osc=aCtx.createOscillator();
  const gain=aCtx.createGain();
  osc.connect(gain);
  gain.connect(aCtx.destination);
  osc.frequency.value= success?600:200;
  gain.gain.value=0.05;
  osc.start();
  setTimeout(()=>osc.stop(),100);
}
</script>
</body>
</html>








